{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
    <h2>Règles de classification</h2>
    <form method="POST" action="{{ url_for('main.classification_rules') }}">
        {{ form.hidden_tag() }}
        
        <div class="form-group mb-4">
            <label for="file_size_threshold">Taille du fichier (Ko)</label>
            <input type="range" id="file_size_threshold" name="file_size_threshold" value="{{ form.file_size_threshold.data }}" class="form-control-range" min="100" max="5000" step="50">
            <small id="file_size_value">{{ form.file_size_threshold.data }} Ko</small>
        </div>
        
        <div class="form-group mb-4">
            <label for="avg_r_threshold">Rouge moyen</label>
            <input type="range" id="avg_r_threshold" name="avg_r_threshold" value="{{ form.avg_r_threshold.data }}" class="form-control-range" min="0" max="255" step="1">
            <small id="avg_r_value">{{ form.avg_r_threshold.data }}</small>
        </div>
        
        <div class="form-group mb-4">
            <label for="avg_g_threshold">Vert moyen</label>
            <input type="range" id="avg_g_threshold" name="avg_g_threshold" value="{{ form.avg_g_threshold.data }}" class="form-control-range" min="0" max="255" step="1">
            <small id="avg_g_value">{{ form.avg_g_threshold.data }}</small>
        </div>

        <div class="form-group mb-4">
            <label for="avg_b_threshold">Bleu moyen</label>
            <input type="range" id="avg_b_threshold" name="avg_b_threshold" value="{{ form.avg_b_threshold.data }}" class="form-control-range" min="0" max="255" step="1">
            <small id="avg_b_value">{{ form.avg_b_threshold.data }}</small>
        </div>

        <div class="form-group mb-4">
            <label for="contrast_threshold">Contraste</label>
            <input type="range" id="contrast_threshold" name="contrast_threshold" value="{{ form.contrast_threshold.data }}" class="form-control-range" min="0" max="255" step="0.5">
            <small id="contrast_value">{{ form.contrast_threshold.data }}</small>
        </div>

        <div class="form-group mb-4">
            <label for="laplacian_var_threshold">Netteté de l'image</label>
            <input type="range" id="laplacian_var_threshold" name="laplacian_var_threshold" value="{{ form.laplacian_var_threshold.data }}" class="form-control-range" min="100" max="10000" step="100">
            <small id="laplacian_var_value">{{ form.laplacian_var_threshold.data }}</small>
        </div>
        <div class="d-flex gap-3 mt-4">
            {{ form.submit(class_='btn btn-primary') }}
            {{ form.reset(class_='btn btn-secondary') }}
        </div>
    </form>
</div>

<script>
    // Fonction pour mettre à jour le texte en temps réel lorsque l'utilisateur déplace un curseur
    document.getElementById("file_size_threshold").addEventListener("input", function() {
        document.getElementById("file_size_value").textContent = this.value + " Ko";
    });

    document.getElementById("avg_r_threshold").addEventListener("input", function() {
        document.getElementById("avg_r_value").textContent = this.value;
    });

    document.getElementById("avg_g_threshold").addEventListener("input", function() {
        document.getElementById("avg_g_value").textContent = this.value;
    });

    document.getElementById("avg_b_threshold").addEventListener("input", function() {
        document.getElementById("avg_b_value").textContent = this.value;
    });

    document.getElementById("contrast_threshold").addEventListener("input", function() {
        document.getElementById("contrast_value").textContent = this.value;
    });

    document.getElementById("laplacian_var_threshold").addEventListener("input", function() {
        document.getElementById("laplacian_var_value").textContent = this.value;
    });
</script>

{% endblock %}
